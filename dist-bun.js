/* Bundled by Bun from packages/diffhtml/lib/index.js */
var UX=Object.defineProperty;var zX=(X,J)=>{for(var Z in J)UX(X,Z,{get:J[Z],enumerable:!0,configurable:!0,set:(Q)=>J[Z]=()=>Q})};var L={ELEMENT:1,ATTR:2,TEXT:3,COMMENT:8,FRAGMENT:11},B={STR:"",NUM:1,OBJ:{},ARR:[],MAP:new Map,SET:new Set,DOM:{},FUN:()=>{}},V={SET_ATTRIBUTE:0,REMOVE_ATTRIBUTE:1,NODE_VALUE:2,INSERT_BEFORE:3,REPLACE_CHILD:4,REMOVE_CHILD:5},P=new Map,A=new Map,a=new Set,l=new Set,T=new Set,s=new Set,i=new Set,J0=new Set,pX=B.OBJ;var Y=typeof process!=="undefined"?process:{env:{NODE_ENV:"development"},argv:[]};var H=typeof global==="object"?global:(typeof window==="object"?window:self)||{};var{parseInt:jX}=Number,{parse:BX}=JSON,p0={collectMetrics:!0,executeScripts:!0};function N0(X,J){let Z=String(X);switch(J){case"boolean":return Z!=="false";case"string":return Z;case"number":return jX(Z,10);case"object":return BX(Z)}}function c(X,J,Z=typeof J,Q){let{location:W,URLSearchParams:q}=H,z=typeof q!=="undefined"&&typeof W!=="undefined",R=Y.env;if(Q&&X in Q)return Q[X];let j=`DIFF_${X.replace(/[^a-zA-Z0-9]/,"")}`;if(z){let K=new q(W.search),F=j.toLowerCase();if(K.has(F))return N0(decodeURIComponent(String(K.get(F))),Z)}let D=j.toUpperCase();if(R&&D in Y.env)return N0(Y.env[D.toUpperCase()],Z);return J}var FX=c("initialPoolSize",5000),d=new Set,Z0=new Set,B0=new Set,h0=()=>({rawNodeName:B.STR,nodeName:B.STR,nodeValue:B.STR,nodeType:L.ELEMENT,key:B.STR,childNodes:[],attributes:{}}),GX={free:d,allocated:Z0,protected:B0},m0=d.values(),u0={size:FX,memory:GX,fill(){for(let X=d.size;X<this.size;X++)d.add(h0());if(this.size<d.size)d.forEach((X)=>{if(d.size!==this.size)d.delete(X)})},get(){let{value:X=h0(),done:J}=m0.next();if(J)m0=d.values();return d.delete(X),Z0.add(X),X},protect(X){Z0.delete(X),B0.add(X)},unprotect(X){if(B0.has(X)||Z0.has(X))B0.delete(X),Z0.add(X)}};u0.fill();var t=u0;var{isArray:W0}=Array,{memory:T0}=t,G0="#document-fragment",F0="#text";function c0(X,J=[]){for(let Z=0;Z<X.length;Z++){let Q=X[Z];if(Q&&Q.rawNodeName===G0)c0(Q.childNodes,J);else if(Q)J.push(Q)}return J}function S(X,J,Z,...Q){let W=null;if(T0.protected.has(X)||T0.allocated.has(X))W=X;else if(!X||W0(X)){let K=X?X.length:0;Z=[];for(let F=0;F<K;F++){if(X&&!X[F])continue;X&&Z.push(X[F])}W=S(G0,null,Z)}if(W)return W;let q=typeof X==="object",$=X;if(X&&q&&"ownerDocument"in $){let{nodeType:K}=$;if(K===L.TEXT){let _=S(F0,$.nodeValue);return A.set(_,$),_}J={},Z=[];let F=$.attributes;if($.nodeType===L.ELEMENT&&F&&F.length)for(let _=0;_<F.length;_++){let{name:x,value:G}=F[_];if(G===B.STR&&x in $){J[x]=X[x];continue}J[x]=G}if($.nodeType===L.ELEMENT||$.nodeType===L.FRAGMENT){Z=[];for(let _=0;_<$.childNodes.length;_++){let x=$.childNodes[_];Z.push(S(x))}}return A.forEach((_,x)=>{if(_===X)W=x}),W=W||S($.nodeName,J,Z),W.attributes={...W.attributes,...J},W.childNodes=Z,A.set(W,$),W}if(q&&!J){let{rawNodeName:K,nodeName:F,nodeValue:_,attributes:x,childNodes:G,children:I}=X,M=S(K||F,x||null,I||G);if(_)M.nodeValue=_;return M}if(Q.length)Z=[Z,...Q];W=t.get();let U=X===F0;if(typeof X==="string")W.rawNodeName=X,W.nodeName=W.rawNodeName.toLowerCase();else W.rawNodeName=X,W.nodeName=G0;W.nodeValue=B.STR,W.key=B.STR,W.childNodes.length=0,W.attributes={};let j=W0(J)||typeof J!=="object"?J:Z,D=c0(W0(j)?j:[j]);if(U){let K=D.join(B.STR);return W.nodeType=L.TEXT,W.nodeValue=String(K),W}else if(W.nodeName===G0)W.nodeType=L.FRAGMENT;else if(X==="#comment")W.nodeType=L.COMMENT;else W.nodeType=L.ELEMENT;if(j&&D.length&&(!J||!J.childNodes))for(let K=0;K<D.length;K++){let F=D[K];if(W0(F))W.childNodes.push(...F);else if(!F)continue;else if(F.nodeType===L.FRAGMENT&&typeof F.rawNodeName==="string")W.childNodes.push(...F.childNodes);else if(F&&typeof F==="object")W.childNodes.push(S(F));else W.childNodes.push(S(F0,null,F))}if(J&&typeof J==="object"&&!W0(J)){if(W.attributes={...J},J.childNodes){let K=typeof J.childNodes==="object";W.childNodes.push(K?S(J.childNodes):S(F0,J.childNodes))}}if(W.nodeName==="script"&&W.attributes.src)W.key=String(W.attributes.src);if(W.attributes&&"key"in W.attributes)W.key=String(W.attributes.key);if(l.size)l.forEach((K,F)=>{if(F=K(W))W=S(F)});return W}var RX="diffHTML",R0=new Map,KX=0;function Q0(X){let{mount:J,input:Z}=X,Q=Z,W=KX++;if(!c("collectMetrics",!1))return B.FUN;return(q)=>{q=`[${W}] ${q}`;let{host:$}=J;if(J&&$)q=`${$.constructor.name} ${q}`;else if(Q&&typeof Q.rawNodeName==="function")q=`${Q.rawNodeName.name} ${q}`;let U=`${q}-end`;if(R0.has(q)){let z=R0.get(q)||0,R=(performance.now()-z).toFixed(3);R0.delete(q),performance.mark(U),performance.measure(`${RX} ${q} (${R}ms)`,q,U)}else R0.set(q,performance.now()),performance.mark(q)}}var Y0={};zX(Y0,{unprotectVTree:()=>n,protectVTree:()=>N,gc:()=>V0});var{protect:_X,unprotect:DX,memory:A0}=t;function N(X){if(_X(X),X.childNodes.length)for(let J=0;J<X.childNodes.length;J++)N(X.childNodes[J])}function n(X){if(X.childNodes.length)for(let J=0;J<X.childNodes.length;J++)n(X.childNodes[J]);A.delete(X),DX(X)}function V0(){A0.allocated.forEach((X)=>{X.attributes={},X.childNodes.length=0,X.key=B.STR,A0.free.add(X),A0.allocated.delete(X),A.delete(X)})}function K0(X){let{mount:J,input:Z,state:{measure:Q},config:W}=X,q=W.inner?"innerHTML":"outerHTML";if(Q("should update"),typeof Z==="string"&&J[q]===Z)return X.abort(!0);Q("should update")}var l0=typeof requestIdleCallback!=="undefined",d0=-1,SX=(X)=>(l0?requestIdleCallback:setTimeout)(X),IX=(X)=>(l0?cancelIdleCallback:clearTimeout)(X);function E(X){if(P.has(X)){let{mutationObserver:Z,oldTree:Q}=P.get(X);if(Z&&Z.disconnect(),Q&&!A.has(Q))i.forEach((W)=>W(Q)),n(Q);P.delete(X)}if(!X)return;let J=X;if(J.childNodes&&J.childNodes.length)for(let Z=0;Z<J.childNodes.length;Z++)E(J.childNodes[Z]);if(J.shadowRoot)E(J.shadowRoot);A.forEach((Z,Q)=>{if(Z===J)i.forEach((W)=>W(Q)),n(Q)}),IX(d0),d0=SX(V0)}function e(X){let{state:J,mount:Z,input:Q,config:W}=X,{inner:q}=W,$=Z;if(J.mutationObserver&&!J.isDirty)J.isDirty=Boolean(J.mutationObserver.takeRecords().length);else if(!J.mutationObserver)J.isDirty=!1;if(J.isDirty||!J.oldTree){if(E($),$.ownerDocument&&J.mutationObserver)J.mutationObserver.observe($,{subtree:!0,childList:!0,attributes:!0,characterData:!0});J.oldTree=S($),N(J.oldTree),P.set(Z,J)}let{nodeName:U,attributes:z}=J.oldTree;if(!X.newTree)X.newTree=S(Q);let R=X.newTree;if(!q&&R.nodeType===L.FRAGMENT&&J.oldTree.nodeType!==L.FRAGMENT){let K=[];for(let F=0;F<R.childNodes.length;F++){let _=R.childNodes[F];if(_.nodeType!==L.TEXT||_.nodeValue.trim())K.push(_)}if(K.length===1)X.newTree=K[0];else if(K.length>1)X.newTree=S(R.childNodes)}X.oldTree=J.oldTree;let{oldTree:j,newTree:D}=X;if(q&&j&&D){let K=typeof D.rawNodeName!=="string",_=D.nodeType===L.FRAGMENT&&!K?D.childNodes:D;X.newTree=S(U,z,_)}}var{assign:OX}=Object,{max:LX}=Math,s0=["old","new"],i0="#text";function p(X,J,Z=[],Q={},W=B.OBJ,q){if(!X)X=B.OBJ;if(!J)J=B.OBJ;let{svgElements:$=new Set}=Q,U=X===B.OBJ||q,z=null;if(s.size)s.forEach((G)=>{let I=G(X,J,W);if(I&&I===X)z=Z;else if(I===!1)z=!1;else if(I)OX(J,I)});if(z!==null||!J)return z;let R=X.nodeName,j=J.nodeName,D=j==="svg"||$.has(J);if(j===i0){if(R===i0&&X.nodeValue!==J.nodeValue)return Z.push(V.NODE_VALUE,X,J.nodeValue,X.nodeValue),X.nodeValue=J.nodeValue,Z;else if(U)return Z.push(V.NODE_VALUE,J,J.nodeValue,null),Z}let K=J.childNodes||[];if(J.nodeType===L.ELEMENT){let G=U?B.OBJ:X.attributes,I=J.attributes||B.OBJ;for(let O in I){let M=I[O];if(O in G&&G[O]===I[O])continue;if(!U)G[O]=M;if((!X||X.nodeName!=="script")&&J.nodeName==="script"&&O==="type")continue;Z.push(V.SET_ATTRIBUTE,U?J:X,O,M)}if(!U)for(let O in G){if(O in I)continue;Z.push(V.REMOVE_ATTRIBUTE,X,O),delete G[O]}}if(q){for(let G=0;G<K.length;G++)D&&$.add(K[G]),p(null,K[G],Z,Q,W,!0);return Z}let F={old:new Map,new:new Map};for(let G=0;G<s0.length;G++){let I=s0[G],O=F[I],M=arguments[G],y=M&&M.childNodes;if(y&&y.length)for(let m=0;m<y.length;m++){let u=y[m];if(u.key){if(Y.env.NODE_ENV!=="production"){if(O.has(u.key))throw new Error(`Key: ${u.key} cannot be duplicated`)}O.set(u.key,u)}}}let _=X.childNodes||[],x=LX(K.length,_.length);for(let G=0;G<x;G++){let I=_&&_[G],O=K[G];if(D||O&&O.nodeName==="svg")$.add(O);if(!O){if(p(I,null,Z,Q,W,!0)===!1)K.splice(G,0,I);continue}if(!I){_.push(O),p(null,O,Z,Q,W,!0),Z.push(V.INSERT_BEFORE,X,O,null);continue}let M=O.key,y=I.key,m=F.new.has(y),u=F.old.has(M);if(y||M){if(!m&&!u){p(I,O,Z,Q,W,!0),Z.push(V.REPLACE_CHILD,O,I);continue}else if(!m){Z.push(V.REMOVE_CHILD,I),_.splice(_.indexOf(I),1),G=G-1;continue}if(M!==y){let g=O;if(M&&u)g=F.old.get(M),_.splice(_.indexOf(g),1);else g=O;p(null,g,Z,Q,W,!0),Z.push(V.INSERT_BEFORE,X,g,I),_.splice(G,0,g);continue}}let X0=I.nodeName===O.nodeName;if(p(I,O,Z,Q,W,!X0)===!1){K.splice(G,0,I),x+=1;continue}if(!X0){_[G]=O;let g=_.lastIndexOf(O);if(g>G)_.splice(g,1);Z.push(V.REPLACE_CHILD,O,I)}}if(_.length!==K.length){for(let G=K.length;G<_.length;G++)Z.push(V.REMOVE_CHILD,_[G]);_.length=K.length}return Z}var xX="http://www.w3.org/2000/svg";function w(X,J=H.document,Z){if(Y.env.NODE_ENV!=="production"){if(!X)throw new Error("Missing VTree when trying to create DOM Node")}let Q=S(X),W=A.get(Q);if(W)return W;let{nodeName:q,rawNodeName:$=q,childNodes:U=[]}=Q;Z=Z||q==="svg";let z=null,R=null;if(T.forEach((D)=>{if(R=D(Q))z=R}),!J)return z;let j=z;if(!j){if(q==="#comment")j=J.createComment(Q.nodeValue||B.STR);else if(q==="#text")j=J.createTextNode(Q.nodeValue||B.STR);else if(q==="#document-fragment")j=J.createDocumentFragment();else if(Z)j=J.createElementNS(xX,$);else j=J.createElement($);if(q==="script")j.type="no-execute"}A.set(Q,j);for(let D=0;D<U.length;D++){let K=w(U[D],J,Z);if(j&&K)j.appendChild(K)}return j}function _0(X){let{state:J,state:{measure:Z},oldTree:Q,newTree:W,mount:q}=X;if(Z("sync trees"),Y.env.NODE_ENV!=="production"){if(!Q)throw new Error("Missing old tree during synchronization");if(!W)throw new Error("Missing new tree during synchronization")}if(Q&&W&&Q.nodeName!==W.nodeName&&W.nodeType!==L.FRAGMENT){if(Y.env.NODE_ENV!=="production"){if(!q.parentNode)throw new Error("Unable to replace top level node without a parent")}X.patches=[V.REPLACE_CHILD,W,Q],X.oldTree=J.oldTree=W;let $=w(W);if(P.delete(q),P.set($,J),X.mount=$,W.nodeName==="script")J.scriptsToExecute.set(W,W.attributes.type||B.STR)}else X.patches=p(Q||null,W||null,[],J,X);Z("sync trees")}var H0=H.document?document.createElement("div"):null;function r(X){if(!H0||!X||!X.indexOf||!X.includes("&"))return X;return H0.innerHTML=X,H0.textContent||B.STR}var M0=Symbol.for("diff.after"),D0=Symbol.for("diffHTML");var{keys:AX}=Object,S0=new Set,I0=new Set,n0=(X,J,Z)=>{if(typeof X.moveBefore==="function")X.moveBefore(J,Z||null);else X.insertBefore(J,Z||null)},VX=(X,J,Z,Q)=>{let W=typeof Q==="object"&&Q,q=typeof Q==="function",$=typeof Q==="symbol",U=Z.indexOf("on")===0,z=J,R=U?Z.toLowerCase():Z,j="s-"+X.nodeName+"-"+R,D=J;if(I0.has(j))z[R]=Q;else if(!S0.has(j))try{z[R]=Q,I0.add(j)}catch{S0.add(j)}if(!W&&!q&&!$){let K=Q===null||Q===void 0||Q===!0;D.setAttribute(R,K?B.STR:Q)}else if(W&&R==="style"){let K=AX(Q);for(let F=0;F<K.length;F++)D.style[K[F]]=Q[K[F]]}},YX=(X,J,Z)=>{let Q="r-"+X.nodeName+"-"+Z,W=J;if(I0.has(Q))W[Z]=void 0,delete W[Z];else if(!S0.has(Q))try{W[Z]=void 0,delete W[Z],I0.add(Q)}catch{S0.add(Q)}J.removeAttribute(Z)};function P0(X,J=B.OBJ){let{ownerDocument:Z,svgElements:Q=new Set}=J,{length:W}=X,q=0;while(!0){let $=X[q];if(q===W)break;switch($){case V.REMOVE_ATTRIBUTE:case V.SET_ATTRIBUTE:{let U=$===V.SET_ATTRIBUTE,z=X[q+1],R=X[q+2],j=U?r(X[q+3]):null;q+=U?4:3;let D=Q.has(z),K=w(z,Z,D);N(z),(U?VX:YX)(z,K,R,j);break}case V.NODE_VALUE:{let U=X[q+1],z=X[q+2],R=Q.has(U);q+=4;let j=w(U,Z,R);if(N(U),z.includes("&"))j.nodeValue=r(z);else j.nodeValue=z;break}case V.INSERT_BEFORE:{let U=X[q+1],z=X[q+2],R=X[q+3];if(q+=4,!A.has(U)&&U!==M0)continue;let j=A.get(U);if(U===M0){let _=A.get(R);if(_)j=_.parentNode,R=_.nextSibling?_.nextSibling:null}let D=Q.has(z);N(z);let K=R&&w(R,Z,D),F=w(z,Z,D);n0(j,F,K||null);break}case V.REPLACE_CHILD:{let U=X[q+1],z=X[q+2];q+=3;let R=Q.has(U),j=A.get(z),D=w(U,Z,R);if(!j||!j.parentNode)break;N(U),n0(j.parentNode,D,j),j.parentNode.removeChild(j),n(z);break}case V.REMOVE_CHILD:{let U=X[q+1];q+=2;let z=A.get(U);if(!z||!z.parentNode)break;z.parentNode.removeChild(z),n(U);break}}}}function O0(X){let{mount:J,state:Z,patches:Q}=X,{measure:W,scriptsToExecute:q}=Z;W("patch node");let{ownerDocument:$}=J;Z.ownerDocument=$||H.document;let U=(z)=>{if(z.nodeName==="script")q.set(z,z.attributes.type)};if(T.add(U),Z.ownerDocument)P0(Q,Z);T.delete(U),W("patch node")}function L0(X){return X.end()}var r0=H.document?document.createElement("script"):null;function f0(){return Boolean(r0&&"noModule"in r0)}var{assign:HX}=Object,v=[K0,e,_0,O0,L0],$0={shouldUpdate:K0,reconcileTrees:e,syncTrees:_0,patchNode:O0,endAsTransaction:L0};class C{static create(X,J,Z){return new C(X,J,Z)}static flow(X,J){let Z=X;for(let Q=0;Q<J.length;Q++){if(X.aborted)return Z;if(Z=J[Q](X),Z!==void 0&&Z!==X)return Z}return Z}static assert(X){if(Y.env.NODE_ENV!=="production"){if(typeof X.mount!=="object"||!X.mount)throw new Error("Transaction requires a DOM Node mount point");if(X.aborted&&X.completed)throw new Error("Transaction was previously aborted");if(X.completed)throw new Error("Transaction was previously completed")}}static invokeMiddleware(X){let{state:{measure:J},tasks:Z}=X;a.forEach((Q)=>{let W=`invoke ${Q.name||"anon"}`;J(W);let q=Q(X);if(q)Z.push(q);J(W)})}constructor(X,J,Z){this.mount=X,this.input=J,this.config=Z;let Q=!Z.disableMutationObserver&&"MutationObserver"in(H.window||B.OBJ);this.state=P.get(X)||{measure:Q0(this),svgElements:new Set,scriptsToExecute:new Map,mutationObserver:Q&&new H.window.MutationObserver(()=>{this.state.isDirty=!0})},this.tasks=c("tasks",v,void 0,Z).slice(),this.endedCallbacks=new Set,P.set(X,this.state)}start(){if(Y.env.NODE_ENV!=="production")C.assert(this);let{state:{measure:X},tasks:J}=this,Z=J.pop();return X("render"),this.aborted=!1,C.invokeMiddleware(this),Z&&J.push(Z),C.flow(this,J)}abort(X){if(this.aborted=!0,X)return this.tasks[this.tasks.length-1](this)}end(){let{state:X,config:J,mount:Z}=this,{mutationObserver:Q,measure:W,svgElements:q,scriptsToExecute:$}=X,U=Z;if(W("finalize"),this.completed=!0,q.clear(),X.isRendering=!1,X.isDirty=!1,P.forEach((z)=>{if(z.mutationObserver)z.mutationObserver.takeRecords()}),U.ownerDocument&&Q)Q.observe(U,{subtree:!0,childList:!0,attributes:!0,characterData:!0});else X.isDirty=!0;if($.forEach((z,R)=>{let j=A.get(R);if(j.type=z,!J.executeScripts||f0()&&z==="nomodule")return;let D=HX(j.ownerDocument.createElement("script"),j);for(let K in R.attributes){let F=R.attributes[K];D.setAttribute(K,F)}if(D.textContent=j.textContent,P.has(j))E(j),P.set(D,X);A.set(R,D),j.parentNode&&j.parentNode.replaceChild(D,j)}),$.clear(),this.endedCallbacks.forEach((z)=>z(this)),this.endedCallbacks.clear(),W("finalize"),W("render"),X.oldTree)N(X.oldTree);return this}onceEnded(X){this.endedCallbacks.add(X)}state=B.OBJ;mount=B.OBJ;input=B.OBJ;oldTree=void 0;newTree=void 0;tasks=[];patches=[]}function q0(X){return X.replace(/[&<>]/g,(J)=>`&#${J.charCodeAt(0)};`)}var MX={StateCache:P,NodeCache:A,MiddlewareCache:a,CreateTreeHookCache:l,CreateNodeHookCache:T,SyncTreeHookCache:s,ReleaseHookCache:i,ParseHookCache:J0},k={decodeEntities:r,escape:q0,makeMeasure:Q0,memory:Y0,Pool:t,process:Y,globalConfig:p0,parse:B.FUN,PATCH_TYPE:V,NODE_TYPE:L,createNode:w,syncTree:p,Transaction:C,defaultTasks:v,tasks:$0,...MX};function b0(X){let{state:J,input:Z,config:Q}=X,{measure:W}=J;if(typeof Z==="string"){W("parsing input for new tree");let{childNodes:q}=k.parse(Z,Q),$=S(q);if($)X.newTree=$;W("parsing input for new tree")}}var PX=["script","noscript","style","template"],fX=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"],bX={li:{li:B.NUM},dt:{dt:B.NUM,dd:B.NUM},dd:{dt:B.NUM,dd:B.NUM},td:{td:B.NUM,th:B.NUM},th:{td:B.NUM,th:B.NUM},tbody:{tbody:B.NUM,tfoot:B.NUM},tfoot:{tbody:B.NUM,tfoot:B.NUM}},o0=/<!--/g,a0=/-->/g,t0=/<([^\s\\/>]*)\s?/g,e0=/\s?(\/>)|(<\/(.*?)>)/g,C0=/([^>\/\n ])*?(["'])(?:(?=(\\?))\3.)*?\2|.*?(?=\/>|>|\n| )/gsm,XX=/([^=]*)=(.*)|([^>])/gsm,JX=/([^<]*)/g;function CX(X){if(typeof X!=="string")return X;let J=['"',"'"],Z=J.indexOf(X[0]),W=Z!==-1&&J.indexOf(X[X.length-1]);if(Z!==-1&&W===Z)return X.slice(1,X.length-1);return X}function kX(X,J){C0.lastIndex=J;try{return C0.exec(X)}catch(Z){if(!(Z instanceof RangeError))throw Z;let Q=J,W="",q="";while(Q<X.length&&(X[Q]===" "||X[Q]===`
`))W+=X[Q++];for(;Q<X.length;Q++){let $=X[Q];if(q){if(W+=$,$===q)q="";continue}if($==='"'||$==="'"){q=$,W+=$;continue}if($===">"||$===`
`||$===" ")break;if($==="/"&&X[Q+1]===">")break;W+=$}return W?{0:W,index:J}:null}}function k0(X,J={}){let Z=S("#document-fragment",null,[]);if(!X)return Z.childNodes.push(S("#text",B.STR)),Z;if(!J.parser)J.parser=B.OBJ;let Q=new Set(c("rawElements",PX,"array",J.parser)),W=new Set(c("voidElements",fX,"array",J.parser));if(!X.includes("<")&&!X.includes(">")){let D=S("#text",X);return Z.childNodes.push(D),Z}let q=[Z],$=0,U=Z,z=!1,R=X.indexOf("<!--"),j=()=>{let D=S(q.pop());U=q[q.length-1],U.childNodes.push(D)};while($<X.length){o0.lastIndex=$,a0.lastIndex=$,t0.lastIndex=$,e0.lastIndex=$,C0.lastIndex=$,JX.lastIndex=$,XX.lastIndex=0;let D=Boolean(R!==null&&R<=$),{index:K}=D&&o0.exec(X)||B.OBJ;if(D)R=K;if(K===-1)R=null;let F=U!==Z,_=U&&Q.has(U.nodeName);if(K===$){let{index:f}=a0.exec(X)||B.OBJ;if(f===-1)f=X.length;let b=S("#comment");b.nodeValue=X.slice($+4,f),U.childNodes.push(b),$=f+3;continue}let{0:x,1:G,index:I}=t0.exec(X)||B.OBJ;if(I===$&&G&&!_){if(G[0]==="!"){$=X.indexOf(">",I)+1;continue}let f={rawNodeName:G,nodeName:G,childNodes:[],attributes:{},nodeType:B.NUM,nodeValue:B.STR,key:B.STR},b=bX[G];if(b&&b[U.nodeName])j();U=f,q.push(U),z=!0,$=I+x.length;continue}let{0:O,index:M}=kX(X,$)||B.OBJ,y=M===$&&O.trim();if(z&&M===$){if(!y){if($=$+O.length+1,X[$-1]===">"){let qX=$===X.length;if(X[$-2]==="/"||W.has(U.nodeName)||qX)j();z=!1}continue}let{1:f=O,2:b=O}=XX.exec(y)||B.OBJ,j0=f===b||b===void 0,$X=f.trim();U.attributes[$X]=j0?Boolean(b):CX(b),$=M+O.length;continue}if(_){let f=`</${U.nodeName}>`,b=X.indexOf(f,$);if(b===-1)b=X.length;let j0=X.slice($,b);if(j0)U.childNodes.push(S("#text",j0));$=b+f.length,z=!1,j();continue}if(X[$]===">"){if(z=!1,$=$+1,W.has(U.nodeName))j();continue}let{0:m,3:u,index:X0}=e0.exec(X)||B.OBJ;if(X0===$&&m){let f=W.has(u);if(m[1]==="/"&&F&&!f)j();z=!1,$=X0+m.length;continue}let{0:z0,index:g}=JX.exec(X)||B.OBJ;if(!z&&g===$&&z0.length){let f=S("#text",z0);if(U.childNodes.push(f),$=g+z0.length,$===X.length&&F)j();continue}U.childNodes.push(S("#text",X.slice($,X.length))),$=X.length}if(Z.childNodes.length&&Z.childNodes[0].nodeName==="html"){let D={before:[],after:[]},K={after:[]},F=Z.childNodes[0],_=!0,x=!0;if(F.childNodes=F.childNodes.filter((G)=>{if(G.nodeName==="body"||G.nodeName==="head"){if(G.nodeName==="head")_=!1;if(G.nodeName==="body")x=!1;return!0}else if(G.nodeType===L.ELEMENT){if(_&&x)D.before.push(G);else if(!_&&x)D.after.push(G);else if(!x)K.after.push(G)}}),!F.childNodes[0]||F.childNodes[0].nodeName!=="head"){let G=S("head",null,[]);if(G){let I=G.childNodes;I.unshift.apply(I,D.before),I.push.apply(I,D.after),F.childNodes.unshift(G)}}else{let G=F.childNodes[0].childNodes;G.unshift.apply(G,D.before),G.push.apply(G,D.after)}if(!F.childNodes[1]||F.childNodes[1].nodeName!=="body"){let G=S("body",null,[]);if(G){let I=G.childNodes;I.push.apply(I,K.after),F.childNodes.push(G)}}else{let G=F.childNodes[1].childNodes;G.push.apply(G,K.after)}}return Z}function g0(X,J=B.STR,Z={}){return Z.inner=!0,Z.executeScripts="executeScripts"in Z?Z.executeScripts:!0,Z.tasks=Z.tasks||v,C.create(X,J,Z).start()}function E0(X,J=B.STR,Z={}){return Z.inner=!1,Z.executeScripts="executeScripts"in Z?Z.executeScripts:!0,Z.tasks=Z.tasks||v,C.create(X,J,Z).start()}var{keys:gX}=Object;function v0(X,J={}){let Z=S(),Q=new Set(J.tasks||v);Q.delete($0.patchNode),Q.delete($0.endAsTransaction),Q.add(function q($){return w0($.oldTree)}),J.tasks=[...Q],J.inner=!0;let W="";try{W=C.create(Z,X,J).start()}catch(q){throw E(Z),q}return E(Z),W}function ZX(X){let J=gX(X);return J.length?" "+J.map((Z)=>{let Q=X[Z],W=!Q,q=typeof Q==="object"||typeof Q==="function";if(Q===!0)return Z;return`${Z}${!W&&!q?`="${String(Q)}"`:""}`}).join(" "):""}function w0(X){let J="";if(!X)return J;let{childNodes:Z,nodeType:Q,nodeName:W,nodeValue:q,attributes:$}=X;if(Q===11)for(let U=0;U<Z.length;U++)J+=w0(Z[U]);else if(!Z.length&&Q===1)J+=`<${W}${ZX($)}></${W}>`;else if(Q===3)J+=q;else if(Z.length){let U=Z.map((z)=>`${w0(z)}`).join("");J+=`<${W}${ZX($)}>${U}</${W}>`}return J}var WX="__DIFFHTML__",{getOwnPropertyNames:EX}=Object,{isArray:wX}=Array,o=new RegExp(`${WX}([^_]*)__`),vX=(X)=>{let J=X.shift();return typeof J==="string"?q0(r(J)):J},QX=(X,J)=>{let Z=null,Q=X.rawNodeName;if(X.nodeType===L.COMMENT){let W=X.nodeValue.split(o),q="";for(let $=0;$<W.length;$++)if($%2!==0)q+=J.attributes[W[$]];else q+=W[$];X.nodeValue=q}if(Z=o.exec(X.rawNodeName))Q=J.tags[Z[1]],X=S(Q,X.attributes,X.childNodes);for(let W of EX(X.attributes))W.split(" ").forEach((q)=>{let $=X.attributes[q],U=$,z=q;if(Z=o.exec($)){let R=$.split(o);if(U="",R.length===3&&R[0]===B.STR&&R[2]===B.STR)U=J.attributes[R[1]];else for(let j=0;j<R.length;j++)if(j%2!==0)U+=J.attributes[R[j]];else U+=R[j]}if(Z=o.exec(q)){let R=q.split(o);for(let j=0;j<R.length;j++)if(j%2!==0)z=J.attributes[R[j]]}if(z)if(typeof z!=="string")if(Array.isArray(z)){if(Y.env.NODE_ENV!=="production")throw new Error("Arrays cannot be spread as attributes");delete X.attributes[q]}else delete X.attributes[q],Object.assign(X.attributes,z);else{if(delete X.attributes[q],z==="childNodes")if(X.childNodes.length=0,typeof U!=="string")X.childNodes.push(S(U));else X.childNodes.push(S("#text",U));X.attributes[z]=U===void 0?!0:U}if(X.attributes.key)X.key=X.attributes.key;if(X.nodeName==="script"&&X.attributes.src)X.key=X.attributes.src});if(Z=o.exec(X.nodeValue)){let W=X.nodeValue.split(o),q=S();for(let $=0;$<W.length;$++)if($%2!==0)q.childNodes.push(S(J.children[W[$]]));else if(W[$])q.childNodes.push(S("#text",W[$]));return q}for(let W=0;W<X.childNodes.length;W++){let q=QX(X.childNodes[W],J);if(q.nodeName==="#document-fragment"&&q.rawNodeName===q.nodeName)X.childNodes.splice(W,1,...q.childNodes),W-=1;else X.childNodes[W]=q}return X};function y0(X,...J){let Z=S("#text",B.STR);if(!X)return Z;else if(typeof X==="string")X=[X];if(X.length===1&&!J.length){if(!X[0])return Z;let{childNodes:U}=k.parse(X[0]),z=U[0],R=U[U.length-1],j=z.nodeType===L.TEXT,D=R.nodeType===L.TEXT;if(j||D){let K=[].concat(...U);for(let F=0;F<K.length;F++){let _=K[F];if((_===z||_===R)&&_.nodeType===L.TEXT&&!_.nodeValue.trim())K.splice(F,1)}if(K.length===1)U=K}return S(U.length===1?U[0]:U)}let Q=B.STR,W={attributes:{},children:{},tags:{}};X.forEach((U,z)=>{if(Q+=U,J.length){let R=vX(J),j=Q.trim().slice(-1),D=Q.trim().slice(-2),K=Q.lastIndexOf(">")<Q.lastIndexOf("<"),F=Boolean(j==="<"||D==="</"),_=typeof R==="object",x=`${WX}${z}__`;if(F)W.tags[z]=R,Q+=x;else if(K)W.attributes[z]=R,Q+=x;else if(wX(R)||_)W.children[z]=S(R),Q+=x;else if(R)Q+=R}});let{childNodes:q}=k.parse(Q),$=QX(S(q),W);if($.nodeType===L.FRAGMENT&&$.childNodes.length===1)return $.childNodes[0];return $}var{isArray:yX}=Array;function x0(X){let J=typeof X==="function",Z=typeof X==="object";if(Y.env.NODE_ENV!=="production"){if(!X||!J&&!Z||yX(X))throw new Error("Middleware must be a function or plain object")}let{subscribe:Q,unsubscribe:W,createTreeHook:q,createNodeHook:$,syncTreeHook:U,releaseHook:z,parseHook:R}=X;return J&&a.add(X),Q&&Q(k),q&&l.add(q),$&&T.add($),U&&s.add(U),z&&i.add(z),R&&J0.add(R),()=>{J&&a.delete(X),W&&W(k),q&&l.delete(q),$&&T.delete($),U&&s.delete(U),z&&i.delete(z),R&&J0.delete(R)}}var U0="1.0.0-beta.30";v.splice(v.indexOf(e),0,b0);k.VERSION=U0;k.parse=k0;var h={};h.VERSION=U0;h.release=E;h.createTree=S;h.use=x0;h.outerHTML=E0;h.innerHTML=g0;h.toString=v0;h.html=y0;h.Internals=k;if(D0 in H){let X=H[D0];if(U0!==X.VERSION)console.log(`Loaded ${U0} after ${X.VERSION}`)}H[D0]=h;if(H.devTools)H.unsubscribeDevTools=x0(H.devTools(k));var QJ=h;export{x0 as use,v0 as toString,E as release,E0 as outerHTML,g0 as innerHTML,y0 as html,QJ as default,S as createTree,U0 as VERSION,k as Internals};
